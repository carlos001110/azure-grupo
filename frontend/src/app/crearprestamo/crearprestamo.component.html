<!-- Formulario -->
<div class="container mt-5">
  <h2 class="text-center text-primary mb-4">ğŸ“„ Registrar PrÃ©stamo</h2>

  <form #prestamoForm="ngForm" class="shadow p-4 bg-white rounded border border-2">
    <div class="mb-3">
      <label class="form-label fw-semibold">ğŸ“š Selecciona un artÃ­culo</label>
      <select
        class="form-select"
        name="itemId"
        required
        [(ngModel)]="prestamo.itemId">
        <option [ngValue]="0" disabled selected>-- Selecciona un Ã­tem --</option>
        <option *ngFor="let item of itemsDisponibles" [ngValue]="item.id">
          {{ item.titulo }}
        </option>
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label fw-semibold">ğŸ‘¤ Persona que lo recibe</label>
      <input
        type="text"
        class="form-control"
        name="persona"
        [(ngModel)]="prestamo.persona"
        placeholder="Nombre completo"
        required>
    </div>

    <div class="mb-3">
      <label class="form-label fw-semibold">ğŸ“… Fecha de DevoluciÃ³n</label>
      <input
        type="date"
        class="form-control"
        name="fechaPrevistaDevolucion"
        [(ngModel)]="prestamo.fechaPrevistaDevolucion"
        required>
    </div>

    <div class="d-flex justify-content-between mt-4">
      <button type="button" class="btn btn-success px-4" (click)="abrirModal()">Registrar PrÃ©stamo</button>
      <button type="button" class="btn btn-outline-secondary px-4" (click)="goBack()">
        â† AtrÃ¡s
      </button>      
    </div>
  </form>
</div>

<!-- Modal de ConfirmaciÃ³n -->
<div class="modal fade" id="confirmarModal" tabindex="-1" #confirmarModalElement>
  <div class="modal-dialog modal-dialog-centered modal-lg"> <!-- mÃ¡s ancho -->
    <div class="modal-content border-0 shadow-lg fs-5"> <!-- fuente mÃ¡s grande -->
      <div class="modal-header bg-success text-white">
        <h4 class="modal-title fw-bold">âœ… Confirmar Registro de PrÃ©stamo</h4>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body px-4 py-3">
        <p class="mb-4">Â¿EstÃ¡s seguro de que deseas registrar este prÃ©stamo?</p>
        <ul class="list-group">
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold text-secondary">ğŸ“š ArtÃ­culo:</span>
            <span>{{ nombreItemSeleccionado }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold text-secondary">ğŸ‘¤ Persona:</span>
            <span>{{ prestamo.persona }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold text-secondary">ğŸ“… Devolver el:</span>
            <span>{{ prestamo.fechaPrevistaDevolucion | date:'dd/MM/yyyy' }}</span>
          </li>
        </ul>
      </div>
      <div class="modal-footer px-4 py-3">
        <button class="btn btn-outline-secondary btn-lg" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-success btn-lg px-4" (click)="confirmarRegistro()">Confirmar</button>
      </div>
    </div>
  </div>
</div>


<!-- Modal de Ã‰xito -->
<div class="modal fade" id="exitoModal" tabindex="-1" #exitoModalElement>
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content border-0 shadow-lg fs-5">
      <div class="modal-header bg-info text-white">
        <h4 class="modal-title fw-bold">âœ… PrÃ©stamo creado con Ã©xito</h4>
        <button type="button" class="btn-close btn-close-white" (click)="cerrarModalExito()" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body px-4 py-3">
        <p class="mb-4">El prÃ©stamo fue registrado correctamente con los siguientes datos:</p>
        <ul class="list-group">
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold text-secondary">ğŸ“š ArtÃ­culo:</span>
            <span>{{ nombreItemSeleccionado }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold text-secondary">ğŸ‘¤ Persona:</span>
            <span>{{ prestamo.persona }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold text-secondary">ğŸ“… Devolver el:</span>
            <span>{{ prestamo.fechaPrevistaDevolucion | date:'dd/MM/yyyy' }}</span>
          </li>
        </ul>
      </div>
      <div class="modal-footer px-4 py-3">
        <button class="btn btn-primary btn-lg px-4" data-bs-dismiss="modal" (click)="cerrarModalExito()">Aceptar</button>
      </div>
    </div>
  </div>
</div>

